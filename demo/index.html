<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Big JSON Viewer Demo</title>
  <link rel="stylesheet" href="../styles/default.css">
  <script src="demo.ts"></script>
</head>
<body>
<h1>Big JSON Viewer Demo</h1>

<button type="button" onclick="openPath(rootNode1)">Open path</button>

<div id="container1"></div>

<button type="button" onclick="openPath(rootNode2)">Open path</button>
<div id="container2"></div>
<script>
  const testData1 = {
    element1: 'str',
    element2: 1234,
    element3: [
      23,
      43,
      true,
      false,
      null,
      {name: 'special'},
      {},
    ],
    element4: [],
    element5: "this should be some long text\nwith line break",
    element6: {
      name: 'Hero',
      age: 32,
      birthday: {year: 1986, month: 4, day: 30}
    }
  };
  const rootNode1 = BigJsonViewer.elementFromData(JSON.stringify(testData1));
  document.getElementById('container1').appendChild(rootNode1);

  rootNode1.addEventListener('openNode', function(e) {
    console.log('openNode', e.target.jsonNode.path);
  });

  rootNode1.addEventListener('closeNode', function(e) {
    console.log('closeNode', e);
  });

  const list = new Array(210);
  for (let i = 0; i < list.length; i++) {
    list[i] = Math.random();
    if (list[i] < 0.2) {
      list[i] = 'hey';
    }
  }

  const rootNode2 = BigJsonViewer.elementFromData(JSON.stringify(list));
  document.getElementById('container2').appendChild(rootNode2);

  function openPath(rootNode) {
    const path = prompt('Path');
    if (path !== null) {
      rootNode.openPath(path.split('.'));
    }
  }

</script>
</body>
</html>
